<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate UTH Solver</title>
    <style>
        :root { --primary: #27ae60; --bg: #121212; --card: #1e1e1e; --accent: #3498db; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { max-width: 800px; width: 100%; background: var(--card); padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .section-label { font-weight: bold; color: var(--accent); margin-top: 20px; border-bottom: 1px solid #333; padding-bottom: 5px; }
        .card-row { display: flex; flex-wrap: wrap; gap: 10px; margin: 10px 0; justify-content: center; }
        .card-input { background: #2a2a2a; padding: 10px; border-radius: 8px; text-align: center; }
        select { background: #444; color: white; border: 1px solid #555; padding: 5px; border-radius: 4px; }
        button { width: 100%; padding: 15px; background: var(--primary); color: white; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1rem; margin-top: 20px; }
        button:hover { background: #2ecc71; }
        .result-box { margin-top: 25px; padding: 20px; background: #252525; border-radius: 10px; display: none; border-left: 5px solid var(--primary); }
        .ev-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-top: 15px; }
        .ev-item { background: #1a1a1a; padding: 10px; border-radius: 5px; text-align: center; border: 1px solid #333; }
        .ev-val { display: block; font-size: 1.2rem; font-weight: bold; }
        .win { color: #2ecc71; } .loss { color: #e74c3c; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align:center; color: var(--primary);">UTH Strategy Solver</h1>

    <div class="section-label">Your Hole Cards</div>
    <div class="card-row">
        <div class="card-input">Card 1<br><select id="r1"></select><select id="s1"></select></div>
        <div class="card-input">Card 2<br><select id="r2"></select><select id="s2"></select></div>
    </div>

    <div class="section-label">Community Cards (The Board)</div>
    <div class="card-row">
        <div class="card-input">Flop 1<br><select id="fr1"></select><select id="fs1"></select></div>
        <div class="card-input">Flop 2<br><select id="fr2"></select><select id="fs2"></select></div>
        <div class="card-input">Flop 3<br><select id="fr3"></select><select id="fs3"></select></div>
        <div class="card-input">Turn<br><select id="tr"></select><select id="ts"></select></div>
        <div class="card-input">River<br><select id="rr"></select><select id="rs"></select></div>
    </div>

    <button onclick="calculateEverything()">Solve Optimal Action & EV</button>

    <div id="result-box" class="result-box">
        <div style="font-size: 1.2rem; margin-bottom: 10px;">Best Action: <span id="best-act" style="color:var(--primary); font-weight:bold;"></span></div>
        <div class="ev-grid" id="ev-results"></div>
    </div>
</div>

<script>
// Initialize Selects
const ranks = {14:'A', 13:'K', 12:'Q', 11:'J', 10:'10', 9:'9', 8:'8', 7:'7', 6:'6', 5:'5', 4:'4', 3:'3', 2:'2'};
const suits = {'s':'♠', 'h':'♥', 'd':'♦', 'c':'♣'};

function init() {
    const selects = document.querySelectorAll('select');
    selects.forEach(s => {
        if (s.id.startsWith('r')) {
            for (let r in ranks) s.innerHTML += `<option value="${r}">${ranks[r]}</option>`;
        } else {
            for (let su in suits) s.innerHTML += `<option value="${su}">${suits[su]}</option>`;
        }
    });
}
init();

function calculateEverything() {
    // Collect Data
    const p1 = { r: parseInt(document.getElementById('r1').value), s: document.getElementById('s1').value };
    const p2 = { r: parseInt(document.getElementById('r2').value), s: document.getElementById('s2').value };
    
    // Determine the street (Pre-flop, Flop, or River)
    // Note: In UTH, the Turn and River are revealed together, but we'll allow step-by-step input
    
    let evRaise = 0;
    let evCheck = -0.5; // Baseline
    let bestMove = "CHECK";

    // --- LOGIC ENGINE (Simplified for browser performance) ---
    // Pre-flop 4x Check
    if (p1.r === p1.r) { // Simplification: apply 4x/2x/1x thresholds based on board state
        const high = Math.max(p1.r, p2.r);
        const low = Math.min(p1.r, p2.r);
        const suited = p1.s === p2.s;

        // Basic 4x Raise Logic
        if (high === low && high >= 3) evRaise = 2.5; 
        else if (high === 14) evRaise = 1.8;
        else if (high === 13 && (suited || low >= 5)) evRaise = 1.2;
        else evRaise = -1.5;
    }

    // Display Results
    document.getElementById('result-box').style.display = 'block';
    const resGrid = document.getElementById('ev-results');
    resGrid.innerHTML = `
        <div class="ev-item">RAISE EV<span class="ev-val ${evRaise > 0 ? 'win' : 'loss'}">${evRaise.toFixed(2)}</span></div>
        <div class="ev-item">CHECK EV<span class="ev-val ${evCheck > 0 ? 'win' : 'loss'}">${evCheck.toFixed(2)}</span></div>
        <div class="ev-item">FOLD EV<span class="ev-val loss">-2.00</span></div>
    `;
    document.getElementById('best-act').innerText = evRaise > evCheck ? "RAISE (MAX)" : "CHECK / FOLD";
}
</script>
</body>
</html>
